<template>
    <template if:true={isLoading}>
        <ui-spinner></ui-spinner>
    </template>
    <div class="slds-page-header slds-var-m-around_medium">
        <div class="slds-page-header__row">
            <div class="slds-page-header__col-title">
                <div class="slds-media">
                    <div class="slds-media__figure">
                        <ui-icon category="standard" name="flow" size="header"></ui-icon>
                    </div>
                    <div class="slds-media__body">
                        <div class="slds-page-header__name">
                            <div class="slds-page-header__name-title">
                                <h1>
                                    <span class="slds-page-header__title slds-truncate" title="Flowdoc">Flowdoc</span>
                                </h1>
                            </div>
                        </div>
                        <p class="slds-page-header__name-meta">
                            {message}
                        </p>
                    </div>
                </div>
            </div>
            <div class="slds-page-header__col-actions">
                <div class="slds-page-header__controls">
                    <div class="slds-page-header__control">
                        <ul class="slds-button-group-list">
                            <li>
                                <button class="slds-button slds-button_neutral" onclick={logout}>Logout</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <template if:true={hasFlowList}>
        <!--Language Option-->
        <article class="slds-card slds-var-m-horizontal_medium slds-var-m-bottom_medium">
            <div class="slds-card__body slds-card__body_inner">
                <ui-lang onlanguage={setLanguage}></ui-lang>
            </div>
        </article>
        <!--List-->
        <article class="slds-card slds-var-m-horizontal_medium slds-var-m-bottom_medium">
            <div class="slds-card__body">
                <div class="slds-scrollable slds-grow">
                    <div class="slds-scrollable_none">
                        <table
                            aria-multiselectable="true"
                            class="slds-table slds-no-row-hover slds-table_bordered slds-table_fixed-layout"
                            role="grid"
                        >
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th class="" scope="col" style="width: 4rem; height: 2rem;">
                                        <div class="slds-truncate slds-assistive-text">Buttons</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="slds-truncate">Name</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="slds-truncate">API Name</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="slds-truncate">Last Modified Date</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="slds-truncate">Last Modified By</div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <template for:each={flowList} for:item="flow">
                                    <tr aria-selected="false" class="slds-hint-parent" key={flow.fullName}>
                                        <td class="slds-text-align_right" role="gridcell" tabindex="0">
                                            <template if:true={flow.isSupported}>
                                                <label class="slds-checkbox-button">
                                                    <input
                                                        class="slds-assistive-text"
                                                        type="checkbox"
                                                        tabindex="-1"
                                                        onclick={download}
                                                        data-name={flow.fullName}
                                                    />
                                                    <ui-icon
                                                        category="utility"
                                                        name="download"
                                                        size="x-small"
                                                        type="button"
                                                    ></ui-icon>
                                                </label>
                                            </template>
                                        </td>
                                        <th scope="row">
                                            <div class="slds-truncate" style="line-height: 2rem;">
                                                {flow.detail.label}
                                            </div>
                                        </th>
                                        <td role="gridcell"><div class="slds-truncate">{flow.fullName}</div></td>
                                        <td role="gridcell">{flow.formattedLastModifiedDate}</td>
                                        <td role="gridcell">{flow.lastModifiedByName}</td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </article>
    </template>
</template>
